# ... (El c贸digo anterior es igual) ...

# ------------------------------------------------------------------
# PASOS NUEVOS: OFUSCACIN DE CDIGO JS PARA PWA
# ------------------------------------------------------------------
    - name: Configurar Node.js (Necesario para Terser)
      uses: actions/setup-node@v4 
      with:
        node-version: '20'
        
    - name: Instalar Terser (Minificador/Ofuscador)
      run: npm install -g terser

    - name: Minificar y Ofuscar JavaScript
      run: |
        # Ejecuta la ofuscaci贸n dentro de la carpeta www/js/
        terser www/js/player.js -o www/js/player.js --compress --mangle
        terser www/js/index.js -o www/js/index.js --compress --mangle
        
# ------------------------------------------------------------------
# PASO VITAL NUEVO: COPIAR ARCHIVOS PARA EL DESPLIEGUE
# ------------------------------------------------------------------
    - name: Copiar Frontend al Root para Deploy
      run: |
        # Copia todos los archivos de la carpeta www/ (incluyendo index.html, player.html, y las carpetas js/ y css/) 
        # a la ra铆z del repositorio. Esto es lo que GitHub Pages ver谩.
        cp -R www/* . 
        
# ------------------------------------------------------------------
# FIN DE PASOS MODIFICADOS
# ------------------------------------------------------------------

    - name: Guardar historial, M3U y C贸digo JS Ofuscado
      run: |
        git config user.name "github-actions[bot]"
        git config user.email "github-actions[bot]@users.noreply.github.com"
        
        # A帽ade todo el contenido que se copi贸 a la ra铆z
        git add .
        
        # Elimina el 'git push' del paso anterior para que no haya conflicto
        git diff --quiet && git diff --staged --quiet || git commit -m " Actualizaci贸n autom谩tica IPTV y Frontend Ofuscado - $(date +'%Y-%m-%d %H:%M')"
        git push
        
    - name: Subir archivos como artefactos
# ... (El resto es igual) ...
